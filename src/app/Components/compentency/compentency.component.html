<div class="flex-1 h-[80%] w-[80%] ml-[10%] my-5 main-container">
  <app-wizard></app-wizard>
  <form [formGroup]="competencyForm" (ngSubmit)="onSubmit()" class="flex-form">
    <div formArrayName="competencies">
      <div
        *ngFor="let competency of competencies.controls; let i = index"
        [formGroupName]="i"
        class="flex-row"
      >
        <div class="flex justify-between w-full">
          <div class="w-1/4 pr-4">
            <label for="courseName" class="block mb-2 text-md text-gray-600"
              >Course Name</label
            >
            <input
              type="text"
              placeholder="Course Name"
              id="courseName"
              formControlName="courseName"
              class="w-full rounded-md p-2 placeholder-gray-300 border border-gray-300 focus:outline-none"
            />
            <div
              *ngIf="
                competency.get('courseName')?.invalid &&
                competency.get('courseName')?.touched
              "
              class="text-red-500 text-sm mt-1"
            >
              <span *ngIf="competency.get('courseName')?.hasError('required')"
                >Course Name is required</span
              >
            </div>
          </div>

          <div class="w-1/4 pr-4">
            <label for="durationFrom" class="block mb-2 text-md text-gray-600"
              >Duration From</label
            >
            <input
              type="date"
              id="durationFrom"
              formControlName="durationFrom"
              class="w-full rounded-md p-2 placeholder-gray-300 border border-gray-300 focus:outline-none"
            />
            <div
              *ngIf="
                competency.get('durationFrom')?.invalid &&
                competency.get('durationFrom')?.touched
              "
              class="text-red-500 text-sm mt-1"
            >
              <span *ngIf="competency.get('durationFrom')?.hasError('required')"
                >Duration From is required</span
              >
              <!-- Add other validation messages for durationFrom if needed -->
            </div>
          </div>

          <div class="w-1/4 pr-4">
            <label for="durationTo" class="block mb-2 text-md text-gray-600"
              >Duration To</label
            >
            <input
              type="date"
              id="durationTo"
              formControlName="durationTo"
              class="w-full rounded-md p-2 placeholder-gray-300 border border-gray-300 focus:outline-none"
            />
            <div
              *ngIf="
                competency.get('durationTo')?.invalid &&
                competency.get('durationTo')?.touched
              "
              class="text-red-500 text-sm mt-1"
            >
              <span *ngIf="competency.get('durationTo')?.hasError('required')"
                >Duration To is required</span
              >
              <!-- Add other validation messages for durationTo if needed -->
            </div>
          </div>

          <div class="w-1/4">
            <label for="certificate" class="block mb-2 text-md text-gray-600"
              >Upload Certificate</label
            >
            <input
              type="file"
              id="certificate"
              formControlName="certificate"
              class="w-full rounded-md p-2 border border-gray-300 focus:outline-none"
            />
          </div>
        </div>

        <button
          type="button"
          (click)="removeCompetency(i)"
          *ngIf="competencies.length > 1"
          class="mt-3 px-10 py-3 p-3 text-white font-bold rounded-full bg-red-500"
        >
          Remove
        </button>
        <hr *ngIf="i !== competencies.length - 1" class="my-4 w-full" />
      </div>
    </div>

    <button
      type="button"
      (click)="addCompetency()"
      class="mt-3 px-10 py-3 border rounded-full text-black border-blue-500"
    >
      Add Competency
    </button>
    <div class="flex justify-center cursor-pointer items-center">
      <button
        type="submit"
        class="p-3 text-xl text-white font-bold rounded-md bg-[#2c8ace] w-48"
        [disabled]="competencyForm.invalid"
      >
        Update
      </button>
    </div>
  </form>
  <div class="actions flex gap-4 text-lg justify-end p-4">
    <a [routerLink]="['/information/personal-info']">< Previous</a>
    <a [routerLink]="['/information/work-history']">Next ></a>
  </div>
</div>
