<div class="flex-1 h-[80%] w-[80%] ml-[10%] my-5 main-container">
  <app-wizard></app-wizard>
  <form [formGroup]="workHistoryForm" (ngSubmit)="onSubmit()" class="flex-form">
    <div formArrayName="workHistoryItems">
      <div
        *ngFor="let workHistory of workHistoryItems.controls; let i = index"
        [formGroupName]="i"
        class="flex-row"
      >
        <div class="flex justify-between w-full">
          <div class="w-1/4 pr-4">
            <label for="companyName" class="block mb-2 text-md text-gray-600"
              >Company Name</label
            >
            <input
              type="text"
              placeholder="Company Name"
              id="companyName"
              formControlName="companyName"
              class="w-full rounded-md p-2 placeholder-gray-300 border border-gray-300 focus:outline-none"
            />
            <div
              *ngIf="
                workHistory.get('companyName')?.invalid &&
                workHistory.get('companyName')?.touched
              "
              class="text-red-500 text-sm mt-1"
            >
              <span *ngIf="workHistory.get('companyName')?.hasError('required')"
                >Company Name is required</span
              >
            </div>
          </div>
  
          <div class="w-1/4 pr-4">
            <label for="durationFrom" class="block mb-2 text-md text-gray-600"
              >Duration From</label
            >
            <input
              type="date"
              id="durationFrom"
              formControlName="durationFrom"
              class="w-full rounded-md p-2 placeholder-gray-300 border border-gray-300 focus:outline-none"
            />
            <div
              *ngIf="
                workHistory.get('durationFrom')?.invalid &&
                workHistory.get('durationFrom')?.touched
              "
              class="text-red-500 text-sm mt-1"
            >
              <span *ngIf="workHistory.get('durationFrom')?.hasError('required')"
                >Duration From is required</span
              >
              <!-- Add other validation messages for durationFrom if needed -->
            </div>
          </div>
  
          <div class="w-1/4 pr-4">
            <label for="durationTo" class="block mb-2 text-md text-gray-600"
              >Duration To</label
            >
            <input
              type="date"
              id="durationTo"
              formControlName="durationTo"
              class="w-full rounded-md p-2 placeholder-gray-300 border border-gray-300 focus:outline-none"
            />
            <div
              *ngIf="
                workHistory.get('durationTo')?.invalid &&
                workHistory.get('durationTo')?.touched
              "
              class="text-red-500 text-sm mt-1"
            >
              <span *ngIf="workHistory.get('durationTo')?.hasError('required')"
                >Duration To is required</span
              >
              <!-- Add other validation messages for durationTo if needed -->
            </div>
          </div>
  
          <div class="w-1/4">
            <label
              for="relievingCertificate"
              class="block mb-2 text-md text-gray-600"
              >Relieving Certificate</label
            >
            <input
              type="file"
              id="relievingCertificate"
              formControlName="relievingCertificate"
              class="w-full rounded-md p-2 border border-gray-300 focus:outline-none"
            />
          </div>
        </div>
  
        <button
          type="button"
          (click)="removeWorkHistory(i)"
          *ngIf="workHistoryItems.length > 1"
          class="mt-3 px-10 py-3 p-3 text-white font-bold rounded-full bg-red-500"
        >
          Remove
        </button>
        <hr *ngIf="i !== workHistoryItems.length - 1" class="my-4 w-full" />
      </div>
    </div>
  
    <div>
      <button
        type="button"
        (click)="addWorkHistory()"
        class="mt-3 px-10 py-3 border rounded-full text-black border-blue-500"
      >
        + Add
      </button>
    </div>
    <div class="flex justify-center cursor-pointer items-center">
      <button
        class="p-3 text-xl text-white font-bold rounded-md bg-[#2c8ace] w-48"
        type="submit"
        [disabled]="workHistoryForm.invalid"
        (click)="onSubmit()"
      >
        Update
      </button>
    </div>
  </form>
  <div
    class="actions flex gap-4 text-lg justify-end p-4 "
  >
    <a [routerLink]="['/information/competency']">< Previous</a>
    <a disabled class="opacity-50" target="_blank">Next ></a>
  </div>
</div>
