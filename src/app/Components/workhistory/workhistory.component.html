<div *ngIf="isActive" class="modal-wrap">
  <div class="modal-content text-center">
    <div class="flex justify-end top-0">
      <img
        src="../../../assets/images/close.svg"
        class="cursor-pointer"
        (click)="togglePopup()"
        alt="closeIcon"
      />
    </div>
    <div class="flex justify-center">
      <img src="../../../assets/images/congragulations.svg" alt="popup" />
    </div>
    <div class="text-2xl my-4">Congratulations!</div>
    <div class="text-base mb-5">
      You have completed the onboarding process sucessfully !
    </div>
  </div>
</div>
<div class="flex-1 h-[80%] w-[80%] ml-[10%] my-2 main-container">
  <app-wizard></app-wizard>
  <form
    [formGroup]="workHistoryForm"
    (ngSubmit)="onSubmit()"
    class="flex-form m-14"
  >
    <div formArrayName="workHistoryItems">
      <div
        *ngFor="let workHistory of workHistoryItems.controls; let i = index"
        [formGroupName]="i"
        class="flex-row"
      >
        <div class="flex justify-between w-full">
          <!-- First Column -->
          <div class="w-1/2 pr-4">
            <!-- Company Name Input -->
            <label for="companyName" class="block mb-2 text-md text-gray-400"
              >Company Name</label
            >
            <input
              type="text"
              placeholder="Company Name"
              id="companyName"
              formControlName="companyName"
              class="w-full rounded-md p-2 placeholder-gray-300 border border-gray-300 focus:outline-none"
            />
            <div
              *ngIf="
                workHistory.get('companyName')?.invalid &&
                workHistory.get('companyName')?.touched
              "
              class="text-red-500 text-sm mt-1"
            >
              <span *ngIf="workHistory.get('companyName')?.hasError('required')"
                >Company Name is required</span
              >
            </div>
          </div>

          <!-- Second Column -->
          <div class="w-1/2">
            <!-- Duration From Input -->
            <label for="durationFrom" class="block mb-2 text-md text-gray-400"
              >Duration From</label
            >
            <input
              type="date"
              id="durationFrom"
              formControlName="durationFrom"
              class="w-full rounded-md p-2 placeholder-gray-300 border border-gray-300 focus:outline-none"
            />
            <div
              *ngIf="
                workHistory.get('durationFrom')?.invalid &&
                workHistory.get('durationFrom')?.touched
              "
              class="text-red-500 text-sm mt-1"
            >
              <span
                *ngIf="workHistory.get('durationFrom')?.hasError('required')"
                >Duration From is required</span
              >
              <!-- Add other validation messages for durationFrom if needed -->
            </div>
          </div>
        </div>

        <!-- Second Row -->
        <div class="flex justify-between w-full mt-4">
          <!-- Third Column -->
          <div class="w-1/2 pr-4">
            <!-- Duration To Input -->
            <label for="durationTo" class="block mb-2 text-md text-gray-400"
              >Duration To</label
            >
            <input
              type="date"
              id="durationTo"
              formControlName="durationTo"
              class="w-full rounded-md p-2 placeholder-gray-300 border border-gray-300 focus:outline-none"
            />
            <div
              *ngIf="
                workHistory.get('durationTo')?.invalid &&
                workHistory.get('durationTo')?.touched
              "
              class="text-red-500 text-sm mt-1"
            >
              <span *ngIf="workHistory.get('durationTo')?.hasError('required')"
                >Duration To is required</span
              >
              <!-- Add other validation messages for durationTo if needed -->
            </div>
          </div>

          <!-- Fourth Column -->
          <div class="w-1/2">
            <!-- Relieving Certificate Input -->
            <label
              for="relievingCertificate"
              class="block mb-2 text-md text-gray-400"
              >Relieving Certificate</label
            >
            <input
              type="file"
              id="relievingCertificate"
              formControlName="relievingCertificate"
              class="w-full rounded-md p-2 border border-gray-300 focus:outline-none"
            />
          </div>
        </div>

        <button
          type="button"
          (click)="removeWorkHistory(i)"
          *ngIf="workHistoryItems.length > 1"
          class="mt-3 px-10 py-3 p-3 text-white font-bold rounded-full bg-red-500"
        >
          Remove
        </button>
        <hr *ngIf="i !== workHistoryItems.length - 1" class="my-4 w-full" />
      </div>
    </div>

    <div>
      <button
        type="button"
        (click)="addWorkHistory()"
        class="mt-3 px-10 py-3 border rounded-full text-black border-blue-500"
      >
        + Add
      </button>
    </div>
    <div class="flex justify-center cursor-pointer items-center">
      <button
        class="p-3 text-xl text-white font-bold rounded-md bg-[#2c8ace] w-48"
        type="submit"
        [disabled]="workHistoryForm.invalid"
        (click)="togglePopup(); onSubmit()"
      >
        Update
      </button>
    </div>
  </form>
  <div class="actions flex gap-4 text-lg justify-end p-1">
    <a [routerLink]="['/information/competency']">&lt; Previous</a>
    <a disabled class="opacity-50" target="_blank">Next &gt;</a>
  </div>
</div>
